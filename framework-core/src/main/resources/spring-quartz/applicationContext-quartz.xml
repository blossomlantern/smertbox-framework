<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    					http://www.springframework.org/schema/beans/spring-beans.xsd
    					http://www.springframework.org/schema/aop 
    					http://www.springframework.org/schema/aop/spring-aop.xsd">
    
	<bean id="jobFactory" class="com.smertbox.system.quartz.MyJobFactory"></bean>
	
	<bean id="jobListener" class="com.smertbox.system.quartz.listener.MyJobListener"></bean>
	
	<bean id="schedulerListener" class="com.smertbox.system.quartz.listener.MySchedulerListener"></bean>
	
	<bean id="triggerListener" class="com.smertbox.system.quartz.listener.MyTriggerListener"></bean>
	
    <bean id="jobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">  
    	<property name="name" value="JOB_DEFAULT_NAME"/>
	    <property name="group" value="JOB_DEFAULT_GROUP"/>
	    <property name="jobClass">  
	        <value>com.smertbox.system.quartz.job.InitializeJob</value>  
	    </property>  
	    <property name="durability" value="true" />  
	</bean> 
	
	<!-- <bean id="taskJob" class="com.smertbox.system.quartz.job.InitializeJob"/>
	
	<bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	 	<property name="name" value="JOB_DEFAULT_NAME"/>
	    <property name="group" value="JOB_DEFAULT_GROUP"/>
	    false表示等上一个任务执行完后再开启新的任务
	    <property name="concurrent" value="false"/>
	    <property name="targetObject">
	        <ref bean="taskJob"/>
	    </property>
	    <property name="targetMethod">
	        <value>execute</value>
	    </property>
	</bean> -->
    
    <!-- 配置任务高度的的时间/周期 -->  
	<bean id="jobTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">  
	    <property name="group" value="JOB_DEFAULT_GROUP"/>
	    <property name="jobDetail" ref="jobDetail"></property>  
	    <property name="cronExpression" value="0 */1 * * * ?"></property>  
	    <property name="startDelay" value="3000"></property>  
	</bean> 
    
    <bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    	<property name="dataSource" ref="dataSource" /> 
        <property name="configLocation" value="classpath:spring-quartz/quartz.properties" />
        <property name="jobFactory" ref="jobFactory"/>
        <!-- 延时启动,单位秒 -->    
        <property name="startupDelay" value="1" />    
        <!-- 设置自动启动 -->    
        <property name="autoStartup" value="true" />  
        <!-- 跳过启动检查更新 -->    
        <property name="quartzProperties"> 
			<props>
				<prop key="org.quartz.scheduler.skipUpdateCheck">true</prop> 
			</props>
		</property>
        <property name="applicationContextSchedulerContextKey" value="applicationContextKey" />
        <property name="triggers">  
	        <list>  
	           <ref bean="jobTrigger"/>  
	        </list>  
	    </property>
	    <property name="schedulerListeners" ref="schedulerListener"/>
	    <property name="globalJobListeners" ref="jobListener"/>
	    <property name="globalTriggerListeners" ref="triggerListener"/>
    </bean>

	<bean id="jobManager" class="com.smertbox.system.quartz.JobManager"></bean>
</beans>